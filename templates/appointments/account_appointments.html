{% extends 'base.html' %}
{% load static %}

{% block content %}

    <section class="container my-5">
    <div>
    <br>
    {% if appointments %}
        <div class="row">
            <div class="col-lg-12">
               <div style="text-align: center;">
                    <h3>Hello {{ user.username }}</h3>
                    <br>
                    <h4>These are your upcoming appointments</h4>
               </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div style="padding: 3%;">
                    <table class="table">
                        <tr>
                            <th>Code</th>
                            <th>Shop</th>
                            <th>Date</th>
                            <th>Start time</th>
                            <th>End time</th>
                            <th>Price</th>
                            <th>Cancel?</th>
                        </tr>
                        {% for app in appointments %}
                                <tr>
                                    <td>{{ app.code }}</td>
                                    <td>{{ app.shop.name }}</td>
                                    <td>{{ app.date|date:"d/m/Y" }}</td>
                                    <td>{{ app.start_time|date:"H:i" }}</td>
                                    <td>{{ app.end_time|date:"H:i" }}</td>
                                    <td>{{ app.total_price }} den</td>
                                    <td>
                                        <a href="{% url 'confirm_delete_appointment_page' app.id %}" class="btn btn-danger">Cancel appointment</a>
                                    </td>
                                </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    {% else %}
        <div class="row">
            <div class="col-lg-12">
               <div style="text-align: center;">
                    <h3>Hello {{ user.username }}</h3>
                    <br>
                    <h4>You have no upcoming appointments</h4>
               </div>
            </div>
        </div>
    {% endif %}


        <div class="row justify-content-center">
            <div class="row">
                <div class="col-lg-12">
                    <div style="text-align: center;">
                        <br>
                        <a class="btn btn-primary" href="{% url 'past_appointments_page' %}">View previous appointments</a>
                        <br>
                        <hr>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </section>

{% endblock content %}